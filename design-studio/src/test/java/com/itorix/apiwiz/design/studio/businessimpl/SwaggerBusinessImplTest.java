package com.itorix.apiwiz.design.studio.businessimpl;

import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.itorix.apiwiz.common.model.exception.ItorixException;
import com.itorix.apiwiz.design.studio.model.Swagger3BasePath;
import com.itorix.apiwiz.design.studio.model.Swagger3VO;
import com.itorix.apiwiz.design.studio.model.SwaggerVO;
import com.itorix.apiwiz.identitymanagement.dao.BaseRepository;
import io.swagger.generator.util.SwaggerUtil;
import io.swagger.parser.OpenAPIParser;
import io.swagger.v3.oas.models.servers.Server;
import io.swagger.v3.parser.core.models.SwaggerParseResult;
import org.junit.Before;
import org.junit.Test;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.MockitoAnnotations;
import org.springframework.data.mongodb.core.MongoTemplate;

import java.util.ArrayList;
import java.util.List;
import java.util.Map;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertTrue;
import static org.mockito.Mockito.spy;
import static org.mockito.Mockito.when;

public class SwaggerBusinessImplTest {

	@InjectMocks
	SwaggerBusinessImpl swaggerBusiness = new SwaggerBusinessImpl();

	@Mock
	BaseRepository baseRepository;

	@Mock
	MongoTemplate mongoTemplate;

	@Before
	public void setupMock() {
		MockitoAnnotations.initMocks(this);
	}

	// @Test
	public void getSwaggerInfoForSwagger3() {
		String oas = "3.0";
		String swaggerId = "0af476b3d44447bcbcfb9f0f0459963d";
		String jsessionId = "1234";

		Swagger3VO swagger3VO = spy(new Swagger3VO());
		String swaggerName = "\"EDI Benefit Eligibility Inquiry\"";
		swagger3VO.setName(swaggerName);
		swagger3VO.setSwagger(
				"{\"openapi\":\"3.0.0\",\"info\":{\"title\":\"EDI Benefit Eligibility Inquiry\",\"description\":\"The EDI 270 Health Care Eligibility/Benefit Inquiry transaction set is used to request information from a healthcare insurance plan about a policy’s coverages, typically in relation to a particular plan subscriber. This transaction is typically sent by healthcare service providers, such as hospitals or medical facilities, and sent to insurance companies, government agencies like Medicare or Medicaid, or other organizations that would have information about a given policy. The 270 transaction is used for inquiries about what services are covered for particular patients (policy subscribers or their dependents), including required copay or coinsurance. It may be used to inquire about general information on coverage and benefits. It may also be used for questions about the coverage of specific benefits for a given plan, such as wheelchair rental, diagnostic lab services, physical therapy services, etc. The 270 document typically includes the following:\\n\\n1. Details of the sender of the inquiry (name and contact information of the information receiver)\\n2. Name of the recipient of the inquiry (the information source)\\n3. Details of the plan subscriber about to the inquiry is referring\\n4. Description of eligibility or benefit information requested\",\"version\":\"v1.0.0\",\"termsOfService\":\"https://acme.com/terms-and-conditions\",\"license\":{\"name\":\"Acme EDI License\",\"url\":\"https://acme.com/license\"},\"contact\":{\"name\":\"Thomas Hart\",\"url\":\"https://acme.com/contact-us\",\"email\":\"thomas@acme.com\"}},\"paths\":{\"/benefit-inquiry\":{\"parameters\":[{\"name\":\"Authorization\",\"in\":\"header\",\"required\":true,\"description\":\"\",\"schema\":{\"type\":\"string\"}}],\"post\":{\"summary\":\"Use the Eligibility and Benefit Inquiry (270) transaction to inquire about the health care eligibility and benefits associated with a subscriber or dependent.\",\"description\":\"Use the Eligibility and Benefit Inquiry (270) transaction to inquire about the health care eligibility and benefits associated with a subscriber or dependent.\",\"parameters\":[{\"x-key\":1,\"name\":\"x-senderId\",\"in\":\"header\",\"required\":true,\"description\":\"Sender ID of the client application making the request.\",\"schema\":{\"type\":\"string\"}},{\"x-key\":2,\"name\":\"x-receiverId\",\"in\":\"header\",\"required\":true,\"description\":\"Receiver ID of the client application making the request.\",\"schema\":{\"type\":\"string\"}},{\"x-key\":3,\"name\":\"Content-Type\",\"in\":\"header\",\"required\":true,\"description\":\"Media type of the request payload\",\"example\":\"\",\"schema\":{\"type\":\"string\",\"default\":\"application/json\"}},{\"x-key\":4,\"name\":\"Accept\",\"in\":\"header\",\"required\":false,\"description\":\"Response media type\",\"schema\":{\"type\":\"string\",\"default\":\"application/json\"}}],\"requestBody\":{\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/eligibiltyRequestModel\"}}},\"description\":\"Use the Claim Status Inquiry (276) transaction to inquire about the status of a claim after it has been sent to a payer, whether submitted on paper or electronically.\",\"required\":true,\"x-examples\":{\"application/json\":{\"payloadType\":\"X12_276_Request_005010X279A1\",\"processingMode\":\"RealTime\",\"payloadId\":\"e51d4fae-7dec-11d0-a866-00a0c91e6da2\",\"timestamp\":\"2018-06-15T15:35:45+03:00\",\"payload\":\"ISA*00*          *00*          *ZZ*AVAILITY       *ZZ*BEACON963116116*210122*2010*^*00501*000003100*0*P*:~GS*HR*AVAILITY*BEACON963116116*20210122*2010*1*X*005010X212~ST*276*0001*005010X212~BHT*0010*13*23749464748*20210122*121008~HL*1**20*1~NM1*PR*2*AVAILITY CLEARINGHOUSE*****PI*BHOVO~HL*2*1*21*1~NM1*41*2*REALMED CORPORATION*****46*S00086~HL*3*2*19*1~NM1*1P*2*MONTEFIORE NYACK HOSPITAL*****XX*1104808062~HL*4*3*22*0~DMG*D8*19690411*M~NM1*IL*1*HARTE*JAMES****MI*K9055514802~TRN*1*123456789~REF*1K*499380E0E36B45A7A230516B740BB0FE00000441~REF*D9*23749464748~AMT*T3*323~DTP*472*RD8*20210118-20210118~SE*17*0001~GE*1*1~IEA*1*000003100~\"}}},\"operationId\":\"benefit-inquiry\",\"responses\":{\"200\":{\"description\":\"The Eligibility and Benefit Response (271) transaction is used to respond to a request inquiry about the health care eligibility and benefits associated with a subscriber or dependent.\",\"headers\":{\"Content-Type\":{\"description\":\"\",\"schema\":{\"type\":\"string\",\"default\":\"application/json\"}}},\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/eligibiltyResponseModel\"},\"examples\":{\"response\":{\"value\":{\"payloadType\":\"X12_276_Request_005010X279A1\",\"processingMode\":\"RealTime\",\"payloadId\":\"e51d4fae-7dec-11d0-a866-00a0c91e6da2\",\"timestamp\":\"2018-06-15T15:35:45+03:00\",\"senderId\":\"PRACINSI\",\"receiverId\":\"BHO-541414194\",\"payload\":\"ISA*00*          *00*          *ZZ*AVAILITY       *ZZ*BEACON963116116*210122*2010*^*00501*000003100*0*P*:~GS*HR*AVAILITY*BEACON963116116*20210122*2010*1*X*005010X212~ST*276*0001*005010X212~BHT*0010*13*23749464748*20210122*121008~HL*1**20*1~NM1*PR*2*AVAILITY CLEARINGHOUSE*****PI*BHOVO~HL*2*1*21*1~NM1*41*2*REALMED CORPORATION*****46*S00086~HL*3*2*19*1~NM1*1P*2*MONTEFIORE NYACK HOSPITAL*****XX*1104808062~HL*4*3*22*0~DMG*D8*19690411*M~NM1*IL*1*HARTE*JAMES****MI*K9055514802~TRN*1*123456789~REF*1K*499380E0E36B45A7A230516B740BB0FE00000441~REF*D9*23749464748~AMT*T3*323~DTP*472*RD8*20210118-20210118~SE*17*0001~GE*1*1~IEA*1*000003100~\"}}}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/eligibiltyResponseModel\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/eligibiltyResponseModel\"}}}},\"400\":{\"description\":\"The request could not be understood by the server due to malformed syntax. The client SHOULD NOT repeat the request without modifications.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"401\":{\"description\":\"The request requires user authentication.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"403\":{\"description\":\"The server understood the request, but is refusing to fulfill it. Authorization will not help and the request SHOULD NOT be repeated.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"404\":{\"description\":\"The server has not found anything matching the Request-URI. No indication is given of whether the condition is temporary or permanent.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"405\":{\"description\":\"The method specified in the Request-Line is not allowed for the resource identified by the Request-URI. The response MUST include an Allow header containing a list of valid methods for the requested resource.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"406\":{\"description\":\"The resource identified by the request is only capable of generating response entities which have content characteristics not acceptable according to the accept headers sent in the request.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"429\":{\"description\":\"Request quota settings limit\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"500\":{\"description\":\"The server encountered an unexpected condition which prevented it from fulfilling the request.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"501\":{\"description\":\"The server does not support the functionality required to fulfill the request. This is the appropriate response when the server does not recognize the request method and is not capable of supporting it for any resource.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"503\":{\"description\":\"The server is currently unable to handle the request due to a temporary overloading or maintenance of the server.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"504\":{\"description\":\"The server, while acting as a gateway or proxy, did not receive a timely response from the upstream server specified by the URI (e.g. HTTP, FTP, LDAP) or some other auxiliary server (e.g. DNS) it needed to access in attempting to complete the request.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}}},\"tags\":[\"Eligibility\"],\"security\":[{\"oauth2\":[\"read\",\"write\",\"update\",\"delete\"]}]},\"description\":\"Use the Eligibility and Benefit Inquiry (270) transaction to inquire about the health care eligibility and benefits associated with a subscriber or dependent.\"}},\"tags\":[{\"name\":\"Eligibility\",\"description\":\"EDI 270/271 - Eligibility and Benefit Inquiry and Response.\"}],\"x-mock\":true,\"x-metadata\":{\"metadata\":{\"swaggerName\":\"dad42a4048a34eb7b9f1cdc7b992887a\",\"revision\":1,\"documentation\":[],\"category\":[{\"name\":\"Unsorted\",\"paths\":[\"/benefit-inquiry\"]}]}},\"security\":[{\"oauth2\":[\"read\",\"write\",\"update\",\"delete\"]}],\"servers\":[{\"description\":\"Sandbox Server\",\"url\":\"https://sandbox.acme.com/\",\"x-name\":\"Server1\"},{\"description\":\"Development Server\",\"url\":\"https://dev.acme.com/\",\"x-name\":\"Server2\"},{\"description\":\"QAT Server\",\"url\":\"https://qat.acme.com/\",\"x-name\":\"Server3\"},{\"description\":\"Production Server\",\"url\":\"https://api.acme.com/\",\"x-name\":\"Server4\"}],\"components\":{\"securitySchemes\":{\"oauth2\":{\"type\":\"oauth2\",\"description\":\"The Client Credentials grant is used when applications request an access token to access their own resources, not on behalf of a user.\",\"flows\":{\"clientCredentials\":{\"tokenUrl\":\"https://api.acme.com/v1/access/token\",\"scopes\":{\"read\":\"Allow read scope\",\"write\":\"Allow write scope\",\"update\":\"Allow update scope\",\"delete\":\"Allow delete scope\"}}}}},\"schemas\":{\"errorSchema\":{\"description\":\"Container to hold error data model for X12 transactions\",\"type\":\"object\",\"required\":[\"errors\"],\"properties\":{\"errors\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"code\":{\"type\":\"string\",\"example\":\"Security-1001\"},\"userMessage\":{\"type\":\"string\",\"example\":\"Invalid Access Token\"},\"info\":{\"type\":\"string\",\"example\":\"https://developers.myapi.com/errors/#Security-1001\"}}}}}},\"eligibiltyRequestModel\":{\"description\":\"This API is designed to assist those who request reviews (specialty care, treatment, admission) and those who respond to those requests using the 278 format.\",\"properties\":{\"payloadType\":{\"type\":\"string\",\"description\":\"Paylaod type of EDI X12 request\"},\"processingMode\":{\"type\":\"string\",\"description\":\"Processing mode of the EDI 276/277 request\"},\"payloadID\":{\"type\":\"string\",\"description\":\"ID of the EDI X12 request\"},\"timestamp\":{\"type\":\"string\",\"format\":\"date-time\",\"pattern\":\"[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) (2[0-3]|[01][0-9]):[0-5][0-9]\",\"description\":\"Timestamp the request was sent in\"},\"payload\":{\"type\":\"string\",\"description\":\"X12 EDI content or payload used for checking claim status\"}},\"type\":\"object\"},\"eligibiltyResponseModel\":{\"description\":\"This API is designed to assist those who request reviews (specialty care, treatment, admission) and those who respond to those requests using the 278 format.\",\"properties\":{\"payloadType\":{\"type\":\"string\",\"description\":\"Paylaod type of EDI X12 request\"},\"processingMode\":{\"type\":\"string\",\"description\":\"Processing mode of the EDI 276/277 request\"},\"payloadID\":{\"type\":\"string\",\"description\":\"ID of the EDI X12 request\"},\"senderID\":{\"type\":\"string\",\"description\":\"Sender ID of the EDI X12 request\"},\"receiverID\":{\"type\":\"string\",\"description\":\"Receiver ID of the EDI X12 request\"},\"timestamp\":{\"type\":\"string\",\"format\":\"date-time\",\"pattern\":\"[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) (2[0-3]|[01][0-9]):[0-5][0-9]\",\"description\":\"Timestamp the request was sent in\"},\"payload\":{\"type\":\"string\",\"description\":\"X12 EDI content or payload used for checking claim status\"}},\"type\":\"object\"}}}}");
		when(baseRepository.findOne("swaggerId", swaggerId, Swagger3VO.class)).thenReturn(swagger3VO);
		ArrayList<Swagger3VO> swaggerVersions = new ArrayList<>();
		swaggerVersions.add(swagger3VO);
		when(baseRepository.find("name", swaggerName, Swagger3VO.class)).thenReturn(swaggerVersions);
		when(mongoTemplate.findAll(Swagger3BasePath.class)).thenReturn(null);

		Map swaggerInfo = swaggerBusiness.getSwaggerInfo(jsessionId, swaggerId, oas);
		assertEquals(swaggerName, String.valueOf(swaggerInfo.get("name")));
	}

	@Test
	public void getSwaggerInfoForSwagger2() {
		String oas = "2.0";
		String swaggerId = "0af476b3d44447bcbcfb9f0f0459963d";
		String jsessionId = "1234";

		SwaggerVO swaggerVO = spy(new SwaggerVO());
		String swaggerName = "Test";
		swaggerVO.setName(swaggerName);
		swaggerVO.setSwagger(
				"{\"openapi\":\"3.0.0\",\"info\":{\"title\":\"EDI Benefit Eligibility Inquiry\",\"description\":\"The EDI 270 Health Care Eligibility/Benefit Inquiry transaction set is used to request information from a healthcare insurance plan about a policy’s coverages, typically in relation to a particular plan subscriber. This transaction is typically sent by healthcare service providers, such as hospitals or medical facilities, and sent to insurance companies, government agencies like Medicare or Medicaid, or other organizations that would have information about a given policy. The 270 transaction is used for inquiries about what services are covered for particular patients (policy subscribers or their dependents), including required copay or coinsurance. It may be used to inquire about general information on coverage and benefits. It may also be used for questions about the coverage of specific benefits for a given plan, such as wheelchair rental, diagnostic lab services, physical therapy services, etc. The 270 document typically includes the following:\\n\\n1. Details of the sender of the inquiry (name and contact information of the information receiver)\\n2. Name of the recipient of the inquiry (the information source)\\n3. Details of the plan subscriber about to the inquiry is referring\\n4. Description of eligibility or benefit information requested\",\"version\":\"v1.0.0\",\"termsOfService\":\"https://acme.com/terms-and-conditions\",\"license\":{\"name\":\"Acme EDI License\",\"url\":\"https://acme.com/license\"},\"contact\":{\"name\":\"Thomas Hart\",\"url\":\"https://acme.com/contact-us\",\"email\":\"thomas@acme.com\"}},\"paths\":{\"/benefit-inquiry\":{\"parameters\":[{\"name\":\"Authorization\",\"in\":\"header\",\"required\":true,\"description\":\"\",\"schema\":{\"type\":\"string\"}}],\"post\":{\"summary\":\"Use the Eligibility and Benefit Inquiry (270) transaction to inquire about the health care eligibility and benefits associated with a subscriber or dependent.\",\"description\":\"Use the Eligibility and Benefit Inquiry (270) transaction to inquire about the health care eligibility and benefits associated with a subscriber or dependent.\",\"parameters\":[{\"x-key\":1,\"name\":\"x-senderId\",\"in\":\"header\",\"required\":true,\"description\":\"Sender ID of the client application making the request.\",\"schema\":{\"type\":\"string\"}},{\"x-key\":2,\"name\":\"x-receiverId\",\"in\":\"header\",\"required\":true,\"description\":\"Receiver ID of the client application making the request.\",\"schema\":{\"type\":\"string\"}},{\"x-key\":3,\"name\":\"Content-Type\",\"in\":\"header\",\"required\":true,\"description\":\"Media type of the request payload\",\"example\":\"\",\"schema\":{\"type\":\"string\",\"default\":\"application/json\"}},{\"x-key\":4,\"name\":\"Accept\",\"in\":\"header\",\"required\":false,\"description\":\"Response media type\",\"schema\":{\"type\":\"string\",\"default\":\"application/json\"}}],\"requestBody\":{\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/eligibiltyRequestModel\"}}},\"description\":\"Use the Claim Status Inquiry (276) transaction to inquire about the status of a claim after it has been sent to a payer, whether submitted on paper or electronically.\",\"required\":true,\"x-examples\":{\"application/json\":{\"payloadType\":\"X12_276_Request_005010X279A1\",\"processingMode\":\"RealTime\",\"payloadId\":\"e51d4fae-7dec-11d0-a866-00a0c91e6da2\",\"timestamp\":\"2018-06-15T15:35:45+03:00\",\"payload\":\"ISA*00*          *00*          *ZZ*AVAILITY       *ZZ*BEACON963116116*210122*2010*^*00501*000003100*0*P*:~GS*HR*AVAILITY*BEACON963116116*20210122*2010*1*X*005010X212~ST*276*0001*005010X212~BHT*0010*13*23749464748*20210122*121008~HL*1**20*1~NM1*PR*2*AVAILITY CLEARINGHOUSE*****PI*BHOVO~HL*2*1*21*1~NM1*41*2*REALMED CORPORATION*****46*S00086~HL*3*2*19*1~NM1*1P*2*MONTEFIORE NYACK HOSPITAL*****XX*1104808062~HL*4*3*22*0~DMG*D8*19690411*M~NM1*IL*1*HARTE*JAMES****MI*K9055514802~TRN*1*123456789~REF*1K*499380E0E36B45A7A230516B740BB0FE00000441~REF*D9*23749464748~AMT*T3*323~DTP*472*RD8*20210118-20210118~SE*17*0001~GE*1*1~IEA*1*000003100~\"}}},\"operationId\":\"benefit-inquiry\",\"responses\":{\"200\":{\"description\":\"The Eligibility and Benefit Response (271) transaction is used to respond to a request inquiry about the health care eligibility and benefits associated with a subscriber or dependent.\",\"headers\":{\"Content-Type\":{\"description\":\"\",\"schema\":{\"type\":\"string\",\"default\":\"application/json\"}}},\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/eligibiltyResponseModel\"},\"examples\":{\"response\":{\"value\":{\"payloadType\":\"X12_276_Request_005010X279A1\",\"processingMode\":\"RealTime\",\"payloadId\":\"e51d4fae-7dec-11d0-a866-00a0c91e6da2\",\"timestamp\":\"2018-06-15T15:35:45+03:00\",\"senderId\":\"PRACINSI\",\"receiverId\":\"BHO-541414194\",\"payload\":\"ISA*00*          *00*          *ZZ*AVAILITY       *ZZ*BEACON963116116*210122*2010*^*00501*000003100*0*P*:~GS*HR*AVAILITY*BEACON963116116*20210122*2010*1*X*005010X212~ST*276*0001*005010X212~BHT*0010*13*23749464748*20210122*121008~HL*1**20*1~NM1*PR*2*AVAILITY CLEARINGHOUSE*****PI*BHOVO~HL*2*1*21*1~NM1*41*2*REALMED CORPORATION*****46*S00086~HL*3*2*19*1~NM1*1P*2*MONTEFIORE NYACK HOSPITAL*****XX*1104808062~HL*4*3*22*0~DMG*D8*19690411*M~NM1*IL*1*HARTE*JAMES****MI*K9055514802~TRN*1*123456789~REF*1K*499380E0E36B45A7A230516B740BB0FE00000441~REF*D9*23749464748~AMT*T3*323~DTP*472*RD8*20210118-20210118~SE*17*0001~GE*1*1~IEA*1*000003100~\"}}}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/eligibiltyResponseModel\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/eligibiltyResponseModel\"}}}},\"400\":{\"description\":\"The request could not be understood by the server due to malformed syntax. The client SHOULD NOT repeat the request without modifications.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"401\":{\"description\":\"The request requires user authentication.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"403\":{\"description\":\"The server understood the request, but is refusing to fulfill it. Authorization will not help and the request SHOULD NOT be repeated.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"404\":{\"description\":\"The server has not found anything matching the Request-URI. No indication is given of whether the condition is temporary or permanent.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"405\":{\"description\":\"The method specified in the Request-Line is not allowed for the resource identified by the Request-URI. The response MUST include an Allow header containing a list of valid methods for the requested resource.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"406\":{\"description\":\"The resource identified by the request is only capable of generating response entities which have content characteristics not acceptable according to the accept headers sent in the request.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"429\":{\"description\":\"Request quota settings limit\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"500\":{\"description\":\"The server encountered an unexpected condition which prevented it from fulfilling the request.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"501\":{\"description\":\"The server does not support the functionality required to fulfill the request. This is the appropriate response when the server does not recognize the request method and is not capable of supporting it for any resource.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"503\":{\"description\":\"The server is currently unable to handle the request due to a temporary overloading or maintenance of the server.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"504\":{\"description\":\"The server, while acting as a gateway or proxy, did not receive a timely response from the upstream server specified by the URI (e.g. HTTP, FTP, LDAP) or some other auxiliary server (e.g. DNS) it needed to access in attempting to complete the request.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}}},\"tags\":[\"Eligibility\"],\"security\":[{\"oauth2\":[\"read\",\"write\",\"update\",\"delete\"]}]},\"description\":\"Use the Eligibility and Benefit Inquiry (270) transaction to inquire about the health care eligibility and benefits associated with a subscriber or dependent.\"}},\"tags\":[{\"name\":\"Eligibility\",\"description\":\"EDI 270/271 - Eligibility and Benefit Inquiry and Response.\"}],\"x-mock\":true,\"x-metadata\":{\"metadata\":{\"swaggerName\":\"dad42a4048a34eb7b9f1cdc7b992887a\",\"revision\":1,\"documentation\":[],\"category\":[{\"name\":\"Unsorted\",\"paths\":[\"/benefit-inquiry\"]}]}},\"security\":[{\"oauth2\":[\"read\",\"write\",\"update\",\"delete\"]}],\"servers\":[{\"description\":\"Sandbox Server\",\"url\":\"https://sandbox.acme.com/\",\"x-name\":\"Server1\"},{\"description\":\"Development Server\",\"url\":\"https://dev.acme.com/\",\"x-name\":\"Server2\"},{\"description\":\"QAT Server\",\"url\":\"https://qat.acme.com/\",\"x-name\":\"Server3\"},{\"description\":\"Production Server\",\"url\":\"https://api.acme.com/\",\"x-name\":\"Server4\"}],\"components\":{\"securitySchemes\":{\"oauth2\":{\"type\":\"oauth2\",\"description\":\"The Client Credentials grant is used when applications request an access token to access their own resources, not on behalf of a user.\",\"flows\":{\"clientCredentials\":{\"tokenUrl\":\"https://api.acme.com/v1/access/token\",\"scopes\":{\"read\":\"Allow read scope\",\"write\":\"Allow write scope\",\"update\":\"Allow update scope\",\"delete\":\"Allow delete scope\"}}}}},\"schemas\":{\"errorSchema\":{\"description\":\"Container to hold error data model for X12 transactions\",\"type\":\"object\",\"required\":[\"errors\"],\"properties\":{\"errors\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"code\":{\"type\":\"string\",\"example\":\"Security-1001\"},\"userMessage\":{\"type\":\"string\",\"example\":\"Invalid Access Token\"},\"info\":{\"type\":\"string\",\"example\":\"https://developers.myapi.com/errors/#Security-1001\"}}}}}},\"eligibiltyRequestModel\":{\"description\":\"This API is designed to assist those who request reviews (specialty care, treatment, admission) and those who respond to those requests using the 278 format.\",\"properties\":{\"payloadType\":{\"type\":\"string\",\"description\":\"Paylaod type of EDI X12 request\"},\"processingMode\":{\"type\":\"string\",\"description\":\"Processing mode of the EDI 276/277 request\"},\"payloadID\":{\"type\":\"string\",\"description\":\"ID of the EDI X12 request\"},\"timestamp\":{\"type\":\"string\",\"format\":\"date-time\",\"pattern\":\"[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) (2[0-3]|[01][0-9]):[0-5][0-9]\",\"description\":\"Timestamp the request was sent in\"},\"payload\":{\"type\":\"string\",\"description\":\"X12 EDI content or payload used for checking claim status\"}},\"type\":\"object\"},\"eligibiltyResponseModel\":{\"description\":\"This API is designed to assist those who request reviews (specialty care, treatment, admission) and those who respond to those requests using the 278 format.\",\"properties\":{\"payloadType\":{\"type\":\"string\",\"description\":\"Paylaod type of EDI X12 request\"},\"processingMode\":{\"type\":\"string\",\"description\":\"Processing mode of the EDI 276/277 request\"},\"payloadID\":{\"type\":\"string\",\"description\":\"ID of the EDI X12 request\"},\"senderID\":{\"type\":\"string\",\"description\":\"Sender ID of the EDI X12 request\"},\"receiverID\":{\"type\":\"string\",\"description\":\"Receiver ID of the EDI X12 request\"},\"timestamp\":{\"type\":\"string\",\"format\":\"date-time\",\"pattern\":\"[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) (2[0-3]|[01][0-9]):[0-5][0-9]\",\"description\":\"Timestamp the request was sent in\"},\"payload\":{\"type\":\"string\",\"description\":\"X12 EDI content or payload used for checking claim status\"}},\"type\":\"object\"}}}}");
		when(baseRepository.findOne("swaggerId", swaggerId, SwaggerVO.class)).thenReturn(swaggerVO);
		ArrayList<SwaggerVO> swaggerVersions = new ArrayList<>();
		swaggerVersions.add(swaggerVO);
		when(baseRepository.find("name", swaggerName, SwaggerVO.class)).thenReturn(swaggerVersions);
	}

	@Test
	public void checkSwaggerParsing() {
		ObjectMapper objMapper = new ObjectMapper();
		String swagger = "{\\\"swagger\\\":\\\"2.0\\\",\\\"schemes\\\":[\\\"https\\\"],\\\"host\\\":\\\"management.azure.com\\\",\\\"info\\\":{\\\"description\\\":\\\"REST APIs for Azure Advisor\\\",\\\"title\\\":\\\"AdvisorManagementClient\\\",\\\"version\\\":\\\"2016-07-12-preview\\\",\\\"x-apisguru-categories\\\":[\\\"cloud\\\"],\\\"x-logo\\\":{\\\"url\\\":\\\"https://assets.onestore.ms/cdnfiles/onestorerolling-1606-01000/shell/v3/images/logo/microsoft.png\\\"},\\\"x-origin\\\":[{\\\"format\\\":\\\"swagger\\\",\\\"url\\\":\\\"https://raw.githubusercontent.com/Azure/azure-rest-api-specs/master/arm-advisor/2016-07-12-preview/swagger/advisor.json\\\",\\\"version\\\":\\\"2.0\\\"}],\\\"x-providerName\\\":\\\"azure.com\\\",\\\"x-serviceName\\\":\\\"arm-advisor\\\",\\\"x-tags\\\":[\\\"Azure\\\",\\\"Microsoft\\\"],\\\"x-preferred\\\":true},\\\"consumes\\\":[\\\"application/json\\\"],\\\"produces\\\":[\\\"application/json\\\"],\\\"securityDefinitions\\\":{\\\"azure_auth\\\":{\\\"authorizationUrl\\\":\\\"https://login.microsoftonline.com/common/oauth2/authorize\\\",\\\"description\\\":\\\"Azure Active Directory OAuth2 Flow.\\\",\\\"flow\\\":\\\"implicit\\\",\\\"scopes\\\":{\\\"user_impersonation\\\":\\\"impersonate your user account\\\"},\\\"type\\\":\\\"oauth2\\\"}},\\\"security\\\":[{\\\"azure_auth\\\":[\\\"user_impersonation\\\"]}],\\\"parameters\\\":{\\\"apiVersionParameter\\\":{\\\"description\\\":\\\"The version of the API to be used with the client request.\\\",\\\"in\\\":\\\"query\\\",\\\"name\\\":\\\"api-version\\\",\\\"required\\\":true,\\\"type\\\":\\\"string\\\"},\\\"subscriptionIdParameter\\\":{\\\"description\\\":\\\"The Azure subscription ID.\\\",\\\"in\\\":\\\"path\\\",\\\"name\\\":\\\"subscriptionId\\\",\\\"required\\\":true,\\\"type\\\":\\\"string\\\"}},\\\"paths\\\":{\\\"/providers/Microsoft.Advisor/operations\\\":{\\\"get\\\":{\\\"deprecated\\\":false,\\\"description\\\":\\\"Lists all the available Advisor REST API operations.\\\",\\\"operationId\\\":\\\"Operations_List\\\",\\\"parameters\\\":[{\\\"$ref\\\":\\\"#/parameters/apiVersionParameter\\\"}],\\\"responses\\\":{\\\"200\\\":{\\\"description\\\":\\\"OK.\\\",\\\"schema\\\":{\\\"$ref\\\":\\\"#/definitions/OperationEntityListResult\\\"}}},\\\"tags\\\":[\\\"Operations\\\"],\\\"x-ms-pageable\\\":{\\\"nextLinkName\\\":\\\"nextLink\\\"}}},\\\"/subscriptions/{subscriptionId}/providers/Microsoft.Advisor/generateRecommendations\\\":{\\\"post\\\":{\\\"deprecated\\\":false,\\\"description\\\":\\\"Initiates the recommendation generation or computation process for a subscription. This operation is asynchronous. The generated recommendations are stored in a cache in the Advisor service.\\\",\\\"operationId\\\":\\\"Recommendations_Generate\\\",\\\"parameters\\\":[{\\\"$ref\\\":\\\"#/parameters/subscriptionIdParameter\\\"},{\\\"$ref\\\":\\\"#/parameters/apiVersionParameter\\\"}],\\\"responses\\\":{\\\"202\\\":{\\\"description\\\":\\\"Accepted.\\\",\\\"headers\\\":{\\\"Location\\\":{\\\"description\\\":\\\"The URL where the status of the asynchronous operation can be checked.\\\",\\\"type\\\":\\\"string\\\"},\\\"Retry-After\\\":{\\\"description\\\":\\\"The amount of delay to use while the status of the operation is checked. The value is expressed in seconds.\\\",\\\"type\\\":\\\"string\\\"}}}},\\\"tags\\\":[\\\"GenerateRecommendations\\\"],\\\"x-ms-examples\\\":{\\\"GenerateRecommendations\\\":{\\\"parameters\\\":{\\\"api-version\\\":\\\"2016-07-12-preview\\\",\\\"subscriptionId\\\":\\\"subscriptionId\\\"},\\\"responses\\\":{\\\"202\\\":{\\\"headers\\\":{\\\"Location\\\":\\\"https://management.azure.com/subscriptions/subscriptionId/providers/Microsoft.Microsoft.Advisor/generateRecommendations/recGUID?api-version=2016-07-12-preview\\\",\\\"Retry-After\\\":\\\"60\\\"}}}}}}},\\\"/subscriptions/{subscriptionId}/providers/Microsoft.Advisor/generateRecommendations/{operationId}\\\":{\\\"get\\\":{\\\"deprecated\\\":false,\\\"description\\\":\\\"Retrieves the status of the recommendation computation or generation process. Invoke this API after calling the generation recommendation. The URI of this API is returned in the Location field of the response header.\\\",\\\"operationId\\\":\\\"Recommendations_GetGenerateRecommendationsStatus\\\",\\\"parameters\\\":[{\\\"$ref\\\":\\\"#/parameters/subscriptionIdParameter\\\"},{\\\"description\\\":\\\"The operation ID, which can be found from the Location field in the generate recommendation response header.\\\",\\\"format\\\":\\\"uuid\\\",\\\"in\\\":\\\"path\\\",\\\"name\\\":\\\"operationId\\\",\\\"required\\\":true,\\\"type\\\":\\\"string\\\"},{\\\"$ref\\\":\\\"#/parameters/apiVersionParameter\\\"}],\\\"responses\\\":{\\\"202\\\":{\\\"description\\\":\\\"Recommendation generation is in progress.\\\"},\\\"204\\\":{\\\"description\\\":\\\"Recommendation generation has been completed.\\\"}},\\\"tags\\\":[\\\"GenerateRecommendations\\\"],\\\"x-ms-examples\\\":{\\\"PollGenerateRecommendationsStatus\\\":{\\\"parameters\\\":{\\\"api-version\\\":\\\"2016-07-12-preview\\\",\\\"operationId\\\":\\\"operationGUID\\\",\\\"subscriptionId\\\":\\\"subscriptionId\\\"},\\\"responses\\\":{\\\"202\\\":{},\\\"204\\\":{}}}}}},\\\"/subscriptions/{subscriptionId}/providers/Microsoft.Advisor/recommendations\\\":{\\\"get\\\":{\\\"deprecated\\\":false,\\\"description\\\":\\\"Obtains cached recommendations for a subscription. The recommendations are generated or computed by invoking generateRecommendations.\\\",\\\"operationId\\\":\\\"Recommendations_List\\\",\\\"parameters\\\":[{\\\"$ref\\\":\\\"#/parameters/subscriptionIdParameter\\\"},{\\\"$ref\\\":\\\"#/parameters/apiVersionParameter\\\"},{\\\"description\\\":\\\"The filter to apply to the recommendations.\\\",\\\"in\\\":\\\"query\\\",\\\"name\\\":\\\"$filter\\\",\\\"required\\\":false,\\\"type\\\":\\\"string\\\"},{\\\"description\\\":\\\"The number of recommendations per page if a paged version of this API is being used.\\\",\\\"in\\\":\\\"query\\\",\\\"name\\\":\\\"$top\\\",\\\"required\\\":false,\\\"type\\\":\\\"integer\\\"},{\\\"description\\\":\\\"The page-continuation token to use with a paged version of this API.\\\",\\\"in\\\":\\\"query\\\",\\\"name\\\":\\\"$skipToken\\\",\\\"required\\\":false,\\\"type\\\":\\\"string\\\"}],\\\"responses\\\":{\\\"200\\\":{\\\"description\\\":\\\"OK.\\\",\\\"schema\\\":{\\\"$ref\\\":\\\"#/definitions/ResourceRecommendationBaseListResult\\\"}}},\\\"tags\\\":[\\\"GetRecommendations\\\"],\\\"x-ms-examples\\\":{\\\"ListRecommendations\\\":{\\\"parameters\\\":{\\\"$top\\\":10,\\\"api-version\\\":\\\"2016-07-12-preview\\\",\\\"subscriptionId\\\":\\\"subscriptionId\\\"},\\\"responses\\\":{\\\"200\\\":{\\\"body\\\":{\\\"nextLink\\\":\\\"https://management.azure.com/subscriptions/subscriptionId/providers/Microsoft.Advisor/recommendations?api-version=2016-07-12-preview&$top=10&$skiptoken=skiptoken\\\",\\\"value\\\":[{\\\"id\\\":\\\"/resourceUri/providers/Microsoft.Advisor/recommendations/recGUID\\\",\\\"name\\\":\\\"recGUID\\\",\\\"properties\\\":{\\\"category\\\":\\\"HighAvailability\\\",\\\"impact\\\":\\\"Medium\\\",\\\"impactedField\\\":\\\"Microsoft.Compute/availabilitySets\\\",\\\"impactedValue\\\":\\\"armavset\\\",\\\"lastUpdated\\\":\\\"2017-02-24T22:24:43.3216408Z\\\",\\\"risk\\\":\\\"Warning\\\",\\\"shortDescription\\\":{\\\"problem\\\":\\\"This availability set is not configured for fault tolerance\\\",\\\"solution\\\":\\\"To ensure high availability add one or more virtual machines to this availability set\\\"}},\\\"type\\\":\\\"Microsoft.Advisor/recommendations\\\"}]}}}}},\\\"x-ms-pageable\\\":{\\\"nextLinkName\\\":\\\"nextLink\\\"}}},\\\"/subscriptions/{subscriptionId}/providers/Microsoft.Advisor/suppressions\\\":{\\\"get\\\":{\\\"deprecated\\\":false,\\\"description\\\":\\\"Retrieves the list of snoozed or dismissed suppressions for a subscription. The snoozed or dismissed attribute of a recommendation is referred to as a suppression.\\\",\\\"operationId\\\":\\\"Suppressions_List\\\",\\\"parameters\\\":[{\\\"$ref\\\":\\\"#/parameters/subscriptionIdParameter\\\"},{\\\"$ref\\\":\\\"#/parameters/apiVersionParameter\\\"}],\\\"responses\\\":{\\\"200\\\":{\\\"description\\\":\\\"OK.\\\",\\\"schema\\\":{\\\"items\\\":{\\\"$ref\\\":\\\"#/definitions/SuppressionContract\\\"},\\\"type\\\":\\\"array\\\"}}},\\\"tags\\\":[\\\"Suppressions\\\"],\\\"x-ms-examples\\\":{\\\"ListSuppressions\\\":{\\\"parameters\\\":{\\\"api-version\\\":\\\"2016-07-12-preview\\\",\\\"subscriptionId\\\":\\\"subscriptionId1\\\"},\\\"responses\\\":{\\\"200\\\":{\\\"body\\\":[{\\\"id\\\":\\\"/resourceUri/providers/Microsoft.Advisor/recommendations/recommendationId/suppressions/suppressionName1\\\",\\\"name\\\":\\\"suppressionName1\\\",\\\"suppressionId\\\":\\\"suppressionId1\\\",\\\"ttl\\\":\\\"7.00:00:00\\\",\\\"type\\\":\\\"Microsoft.Advisor/suppressions\\\"},{\\\"id\\\":\\\"/resourceUri/providers/Microsoft.Advisor/recommendations/recommendationId/suppressions/suppressionName2\\\",\\\"name\\\":\\\"suppressionName2\\\",\\\"suppressionId\\\":\\\"suppressionId2\\\",\\\"ttl\\\":\\\"7.00:00:00\\\",\\\"type\\\":\\\"Microsoft.Advisor/suppressions\\\"}]}}}}}},\\\"/{resourceUri}/providers/Microsoft.Advisor/recommendations/{recommendationId}\\\":{\\\"get\\\":{\\\"deprecated\\\":false,\\\"description\\\":\\\"Obtains details of a cached recommendation.\\\",\\\"operationId\\\":\\\"Recommendations_Get\\\",\\\"parameters\\\":[{\\\"description\\\":\\\"The fully qualified Azure Resource Manager identifier of the resource to which the recommendation applies.\\\",\\\"in\\\":\\\"path\\\",\\\"name\\\":\\\"resourceUri\\\",\\\"required\\\":true,\\\"type\\\":\\\"string\\\"},{\\\"description\\\":\\\"The recommendation ID.\\\",\\\"in\\\":\\\"path\\\",\\\"name\\\":\\\"recommendationId\\\",\\\"required\\\":true,\\\"type\\\":\\\"string\\\"},{\\\"$ref\\\":\\\"#/parameters/apiVersionParameter\\\"}],\\\"responses\\\":{\\\"200\\\":{\\\"description\\\":\\\"OK\\\",\\\"schema\\\":{\\\"$ref\\\":\\\"#/definitions/ResourceRecommendationBase\\\"}}},\\\"tags\\\":[\\\"GetRecommendations\\\"],\\\"x-ms-examples\\\":{\\\"GetRecommendationDetail\\\":{\\\"parameters\\\":{\\\"api-version\\\":\\\"2016-07-12-preview\\\",\\\"recommendationId\\\":\\\"recommendationId\\\",\\\"resourceUri\\\":\\\"resourceUri\\\"},\\\"responses\\\":{\\\"200\\\":{\\\"body\\\":{\\\"id\\\":\\\"/resourceUri/providers/Microsoft.Advisor/recommendations/recommendationId\\\",\\\"name\\\":\\\"recommendationId\\\",\\\"properties\\\":{\\\"category\\\":\\\"HighAvailability\\\",\\\"impact\\\":\\\"Medium\\\",\\\"impactedField\\\":\\\"Microsoft.Compute/availabilitySets\\\",\\\"impactedValue\\\":\\\"armavset\\\",\\\"lastUpdated\\\":\\\"2017-02-24T22:24:43.3216408Z\\\",\\\"risk\\\":\\\"Warning\\\",\\\"shortDescription\\\":{\\\"problem\\\":\\\"This availability set is not configured for fault tolerance\\\",\\\"solution\\\":\\\"To ensure high availability add one or more virtual machines to this availability set\\\"}},\\\"type\\\":\\\"Microsoft.Advisor/recommendations\\\"}}}}}}},\\\"/{resourceUri}/providers/Microsoft.Advisor/recommendations/{recommendationId}/suppressions/{name}\\\":{\\\"delete\\\":{\\\"deprecated\\\":false,\\\"description\\\":\\\"Enables the activation of a snoozed or dismissed recommendation. The snoozed or dismissed attribute of a recommendation is referred to as a suppression.\\\",\\\"operationId\\\":\\\"Suppressions_Delete\\\",\\\"parameters\\\":[{\\\"description\\\":\\\"The fully qualified Azure Resource Manager identifier of the resource to which the recommendation applies.\\\",\\\"in\\\":\\\"path\\\",\\\"name\\\":\\\"resourceUri\\\",\\\"required\\\":true,\\\"type\\\":\\\"string\\\"},{\\\"description\\\":\\\"The recommendation ID.\\\",\\\"in\\\":\\\"path\\\",\\\"name\\\":\\\"recommendationId\\\",\\\"required\\\":true,\\\"type\\\":\\\"string\\\"},{\\\"description\\\":\\\"The name of the suppression.\\\",\\\"in\\\":\\\"path\\\",\\\"name\\\":\\\"name\\\",\\\"required\\\":true,\\\"type\\\":\\\"string\\\"},{\\\"$ref\\\":\\\"#/parameters/apiVersionParameter\\\"}],\\\"responses\\\":{\\\"204\\\":{\\\"description\\\":\\\"The recommendation has been activated.\\\"}},\\\"tags\\\":[\\\"Suppressions\\\"],\\\"x-ms-examples\\\":{\\\"DeleteSuppression\\\":{\\\"parameters\\\":{\\\"api-version\\\":\\\"2016-07-12-preview\\\",\\\"name\\\":\\\"suppressionName1\\\",\\\"recommendationId\\\":\\\"recommendationId\\\",\\\"resourceUri\\\":\\\"resourceUri\\\"},\\\"responses\\\":{\\\"204\\\":{}}}}},\\\"get\\\":{\\\"deprecated\\\":false,\\\"description\\\":\\\"Obtains the details of a suppression.\\\",\\\"operationId\\\":\\\"Suppressions_Get\\\",\\\"parameters\\\":[{\\\"description\\\":\\\"The fully qualified Azure Resource Manager identifier of the resource to which the recommendation applies.\\\",\\\"in\\\":\\\"path\\\",\\\"name\\\":\\\"resourceUri\\\",\\\"required\\\":true,\\\"type\\\":\\\"string\\\"},{\\\"description\\\":\\\"The recommendation ID.\\\",\\\"in\\\":\\\"path\\\",\\\"name\\\":\\\"recommendationId\\\",\\\"required\\\":true,\\\"type\\\":\\\"string\\\"},{\\\"description\\\":\\\"The name of the suppression.\\\",\\\"in\\\":\\\"path\\\",\\\"name\\\":\\\"name\\\",\\\"required\\\":true,\\\"type\\\":\\\"string\\\"},{\\\"$ref\\\":\\\"#/parameters/apiVersionParameter\\\"}],\\\"responses\\\":{\\\"200\\\":{\\\"description\\\":\\\"OK.\\\",\\\"schema\\\":{\\\"$ref\\\":\\\"#/definitions/SuppressionContract\\\"}}},\\\"tags\\\":[\\\"Suppressions\\\"],\\\"x-ms-examples\\\":{\\\"GetSuppressionDetail\\\":{\\\"parameters\\\":{\\\"api-version\\\":\\\"2016-07-12-preview\\\",\\\"name\\\":\\\"suppressionName1\\\",\\\"recommendationId\\\":\\\"recommendationId\\\",\\\"resourceUri\\\":\\\"resourceUri\\\"},\\\"responses\\\":{\\\"200\\\":{\\\"body\\\":{\\\"id\\\":\\\"/resourceUri/providers/Microsoft.Advisor/recommendations/recommendationId/suppressions/suppressionName1\\\",\\\"name\\\":\\\"suppressionName1\\\",\\\"suppressionId\\\":\\\"suppressionId1\\\",\\\"ttl\\\":\\\"7.00:00:00\\\",\\\"type\\\":\\\"Microsoft.Advisor/suppressions\\\"}}}}}},\\\"put\\\":{\\\"deprecated\\\":false,\\\"description\\\":\\\"Enables the snoozed or dismissed attribute of a recommendation. The snoozed or dismissed attribute is referred to as a suppression. Use this API to create or update the snoozed or dismissed status of a recommendation.\\\",\\\"operationId\\\":\\\"Suppressions_Create\\\",\\\"parameters\\\":[{\\\"description\\\":\\\"The fully qualified Azure Resource Manager identifier of the resource to which the recommendation applies.\\\",\\\"in\\\":\\\"path\\\",\\\"name\\\":\\\"resourceUri\\\",\\\"required\\\":true,\\\"type\\\":\\\"string\\\"},{\\\"description\\\":\\\"The recommendation ID.\\\",\\\"in\\\":\\\"path\\\",\\\"name\\\":\\\"recommendationId\\\",\\\"required\\\":true,\\\"type\\\":\\\"string\\\"},{\\\"description\\\":\\\"The name of the suppression.\\\",\\\"in\\\":\\\"path\\\",\\\"name\\\":\\\"name\\\",\\\"required\\\":true,\\\"type\\\":\\\"string\\\"},{\\\"description\\\":\\\"The snoozed or dismissed attribute; for example, the snooze duration.\\\",\\\"in\\\":\\\"body\\\",\\\"name\\\":\\\"suppressionContract\\\",\\\"required\\\":true,\\\"schema\\\":{\\\"$ref\\\":\\\"#/definitions/SuppressionContract\\\"}},{\\\"$ref\\\":\\\"#/parameters/apiVersionParameter\\\"}],\\\"responses\\\":{\\\"200\\\":{\\\"description\\\":\\\"OK.\\\",\\\"schema\\\":{\\\"$ref\\\":\\\"#/definitions/SuppressionContract\\\"}}},\\\"tags\\\":[\\\"Suppressions\\\"],\\\"x-ms-examples\\\":{\\\"CreateSuppression\\\":{\\\"parameters\\\":{\\\"api-version\\\":\\\"2016-07-12-preview\\\",\\\"name\\\":\\\"suppressionName1\\\",\\\"recommendationId\\\":\\\"recommendationId\\\",\\\"resourceUri\\\":\\\"resourceUri\\\",\\\"suppressionContract\\\":{\\\"id\\\":\\\"/resourceUri/providers/Microsoft.Advisor/recommendations/recommendationId/suppressions/suppressionName1\\\",\\\"name\\\":\\\"suppressionName1\\\",\\\"ttl\\\":\\\"07:00:00:00\\\",\\\"type\\\":\\\"Microsoft.Advisor/suppressions\\\"}},\\\"responses\\\":{\\\"200\\\":{\\\"body\\\":{\\\"id\\\":\\\"/resourceUri/providers/Microsoft.Advisor/recommendations/recommendationId/suppressions/suppressionName1\\\",\\\"name\\\":\\\"suppressionName1\\\",\\\"suppressionId\\\":\\\"suppresionId\\\",\\\"ttl\\\":\\\"07:00:00:00\\\",\\\"type\\\":\\\"Microsoft.Advisor/suppressions\\\"}}}}}}}},\\\"definitions\\\":{\\\"OperationDisplayInfo\\\":{\\\"description\\\":\\\"The operation supported by Advisor.\\\",\\\"properties\\\":{\\\"description\\\":{\\\"description\\\":\\\"The description of the operation.\\\",\\\"type\\\":\\\"string\\\"},\\\"operation\\\":{\\\"description\\\":\\\"The action that users can perform, based on their permission level.\\\",\\\"type\\\":\\\"string\\\"},\\\"provider\\\":{\\\"description\\\":\\\"Service provider: Microsoft Advisor.\\\",\\\"type\\\":\\\"string\\\"},\\\"resource\\\":{\\\"description\\\":\\\"Resource on which the operation is performed.\\\",\\\"type\\\":\\\"string\\\"}},\\\"type\\\":\\\"object\\\"},\\\"OperationEntity\\\":{\\\"description\\\":\\\"The operation supported by Advisor.\\\",\\\"properties\\\":{\\\"display\\\":{\\\"$ref\\\":\\\"#/definitions/OperationDisplayInfo\\\",\\\"description\\\":\\\"The operation supported by Advisor.\\\"},\\\"name\\\":{\\\"description\\\":\\\"Operation name: {provider}/{resource}/{operation}.\\\",\\\"type\\\":\\\"string\\\"}},\\\"type\\\":\\\"object\\\"},\\\"OperationEntityListResult\\\":{\\\"description\\\":\\\"The list of Advisor operations.\\\",\\\"properties\\\":{\\\"nextLink\\\":{\\\"description\\\":\\\"The link used to get the next page of operations.\\\",\\\"type\\\":\\\"string\\\"},\\\"value\\\":{\\\"description\\\":\\\"The list of operations.\\\",\\\"items\\\":{\\\"$ref\\\":\\\"#/definitions/OperationEntity\\\"},\\\"type\\\":\\\"array\\\"}},\\\"type\\\":\\\"object\\\"},\\\"RecommendationProperties\\\":{\\\"description\\\":\\\"The properties of the recommendation.\\\",\\\"properties\\\":{\\\"category\\\":{\\\"description\\\":\\\"The category of the recommendation.\\\",\\\"enum\\\":[\\\"HighAvailability\\\",\\\"Security\\\",\\\"Performance\\\",\\\"Cost\\\"],\\\"type\\\":\\\"string\\\",\\\"x-ms-enum\\\":{\\\"modelAsString\\\":true,\\\"name\\\":\\\"category\\\"}},\\\"impact\\\":{\\\"description\\\":\\\"The business impact of the recommendation.\\\",\\\"enum\\\":[\\\"High\\\",\\\"Medium\\\",\\\"Low\\\"],\\\"type\\\":\\\"string\\\",\\\"x-ms-enum\\\":{\\\"modelAsString\\\":true,\\\"name\\\":\\\"impact\\\"}},\\\"impactedField\\\":{\\\"description\\\":\\\"The resource type identified by Advisor.\\\",\\\"type\\\":\\\"string\\\"},\\\"impactedValue\\\":{\\\"description\\\":\\\"The resource identified by Advisor.\\\",\\\"type\\\":\\\"string\\\"},\\\"lastUpdated\\\":{\\\"description\\\":\\\"The most recent time that Advisor checked the validity of the recommendation.\\\",\\\"format\\\":\\\"date-time\\\",\\\"type\\\":\\\"string\\\"},\\\"metadata\\\":{\\\"additionalProperties\\\":{\\\"type\\\":\\\"object\\\"},\\\"description\\\":\\\"The recommendation metadata.\\\",\\\"type\\\":\\\"object\\\"},\\\"recommendationTypeId\\\":{\\\"description\\\":\\\"The recommendation-type GUID.\\\",\\\"type\\\":\\\"string\\\"},\\\"risk\\\":{\\\"description\\\":\\\"The potential risk of not implementing the recommendation.\\\",\\\"enum\\\":[\\\"Error\\\",\\\"Warning\\\",\\\"None\\\"],\\\"type\\\":\\\"string\\\",\\\"x-ms-enum\\\":{\\\"modelAsString\\\":true,\\\"name\\\":\\\"risk\\\"}},\\\"shortDescription\\\":{\\\"$ref\\\":\\\"#/definitions/ShortDescription\\\",\\\"description\\\":\\\"A summary of the recommendation.\\\"}},\\\"type\\\":\\\"object\\\"},\\\"Resource\\\":{\\\"description\\\":\\\"An Azure resource.\\\",\\\"properties\\\":{\\\"id\\\":{\\\"description\\\":\\\"The resource ID.\\\",\\\"readOnly\\\":true,\\\"type\\\":\\\"string\\\"},\\\"location\\\":{\\\"description\\\":\\\"The location of the resource. This cannot be changed after the resource is created.\\\",\\\"type\\\":\\\"string\\\"},\\\"name\\\":{\\\"description\\\":\\\"The name of the resource.\\\",\\\"readOnly\\\":true,\\\"type\\\":\\\"string\\\"},\\\"tags\\\":{\\\"additionalProperties\\\":{\\\"type\\\":\\\"string\\\"},\\\"description\\\":\\\"The tags of the resource.\\\",\\\"type\\\":\\\"object\\\"},\\\"type\\\":{\\\"description\\\":\\\"The type of the resource.\\\",\\\"readOnly\\\":true,\\\"type\\\":\\\"string\\\"}},\\\"x-ms-azure-resource\\\":true},\\\"ResourceRecommendationBase\\\":{\\\"description\\\":\\\"Advisor Recommendation.\\\",\\\"properties\\\":{\\\"id\\\":{\\\"description\\\":\\\"The fully qualified recommendation ID, for example /subscriptions/subscriptionId/resourceGroups/resourceGroup1/providers/Microsoft.ClassicCompute/virtualMachines/vm1/providers/Microsoft.Advisor/recommendations/recommendationGUID.\\\",\\\"type\\\":\\\"string\\\"},\\\"name\\\":{\\\"description\\\":\\\"The name of recommendation.\\\",\\\"type\\\":\\\"string\\\"},\\\"properties\\\":{\\\"$ref\\\":\\\"#/definitions/RecommendationProperties\\\",\\\"description\\\":\\\"The properties of the recommendation.\\\",\\\"x-ms-client-flatten\\\":true},\\\"suppressionIds\\\":{\\\"description\\\":\\\"The list of snoozed and dismissed rules for the recommendation.\\\",\\\"items\\\":{\\\"format\\\":\\\"uuid\\\",\\\"type\\\":\\\"string\\\"},\\\"type\\\":\\\"array\\\"},\\\"type\\\":{\\\"description\\\":\\\"The recommendation type: Microsoft.Advisor/recommendations.\\\",\\\"type\\\":\\\"string\\\"}},\\\"type\\\":\\\"object\\\"},\\\"ResourceRecommendationBaseListResult\\\":{\\\"description\\\":\\\"The list of Advisor recommendations.\\\",\\\"properties\\\":{\\\"nextLink\\\":{\\\"description\\\":\\\"The link used to get the next page of recommendations.\\\",\\\"type\\\":\\\"string\\\"},\\\"value\\\":{\\\"description\\\":\\\"The list of recommendations.\\\",\\\"items\\\":{\\\"$ref\\\":\\\"#/definitions/ResourceRecommendationBase\\\"},\\\"type\\\":\\\"array\\\"}},\\\"type\\\":\\\"object\\\"},\\\"ShortDescription\\\":{\\\"description\\\":\\\"A summary of the recommendation.\\\",\\\"properties\\\":{\\\"problem\\\":{\\\"description\\\":\\\"The issue or opportunity identified by the recommendation.\\\",\\\"type\\\":\\\"string\\\"},\\\"solution\\\":{\\\"description\\\":\\\"The remediation action suggested by the recommendation.\\\",\\\"type\\\":\\\"string\\\"}},\\\"type\\\":\\\"object\\\"},\\\"SuppressionContract\\\":{\\\"allOf\\\":[{\\\"$ref\\\":\\\"#/definitions/Resource\\\"}],\\\"description\\\":\\\"The details of the snoozed or dismissed rule; for example, the duration, name, and GUID associated with the rule.\\\",\\\"properties\\\":{\\\"suppressionId\\\":{\\\"description\\\":\\\"The GUID of the suppression.\\\",\\\"type\\\":\\\"string\\\"},\\\"ttl\\\":{\\\"description\\\":\\\"The duration for which the suppression is valid.\\\",\\\"type\\\":\\\"string\\\"}},\\\"type\\\":\\\"object\\\"}}}";
		try {
			JsonNode jsonNode = objMapper.readTree(swagger);
		} catch (JsonProcessingException e) {
			e.getMessage();
		}
	}

	@Test
	public void checkSwagger3BasePathChanges() throws ItorixException {
		String swagger3 = "{\"openapi\":\"3.0.0\",\"info\":{\"title\":\"EDI Benefit Eligibility Inquiry\",\"description\":\"The EDI 270 Health Care Eligibility/Benefit Inquiry transaction set is used to request information from a healthcare insurance plan about a policy’s coverages, typically in relation to a particular plan subscriber. This transaction is typically sent by healthcare service providers, such as hospitals or medical facilities, and sent to insurance companies, government agencies like Medicare or Medicaid, or other organizations that would have information about a given policy. The 270 transaction is used for inquiries about what services are covered for particular patients (policy subscribers or their dependents), including required copay or coinsurance. It may be used to inquire about general information on coverage and benefits. It may also be used for questions about the coverage of specific benefits for a given plan, such as wheelchair rental, diagnostic lab services, physical therapy services, etc. The 270 document typically includes the following:\\n\\n1. Details of the sender of the inquiry (name and contact information of the information receiver)\\n2. Name of the recipient of the inquiry (the information source)\\n3. Details of the plan subscriber about to the inquiry is referring\\n4. Description of eligibility or benefit information requested\",\"version\":\"v1.0.0\",\"termsOfService\":\"https://acme.com/terms-and-conditions\",\"license\":{\"name\":\"Acme EDI License\",\"url\":\"https://acme.com/license\"},\"contact\":{\"name\":\"Thomas Hart\",\"url\":\"https://acme.com/contact-us\",\"email\":\"thomas@acme.com\"}},\"paths\":{\"/benefit-inquiry\":{\"parameters\":[{\"name\":\"Authorization\",\"in\":\"header\",\"required\":true,\"description\":\"\",\"schema\":{\"type\":\"string\"}}],\"post\":{\"summary\":\"Use the Eligibility and Benefit Inquiry (270) transaction to inquire about the health care eligibility and benefits associated with a subscriber or dependent.\",\"description\":\"Use the Eligibility and Benefit Inquiry (270) transaction to inquire about the health care eligibility and benefits associated with a subscriber or dependent.\",\"parameters\":[{\"x-key\":1,\"name\":\"x-senderId\",\"in\":\"header\",\"required\":true,\"description\":\"Sender ID of the client application making the request.\",\"schema\":{\"type\":\"string\"}},{\"x-key\":2,\"name\":\"x-receiverId\",\"in\":\"header\",\"required\":true,\"description\":\"Receiver ID of the client application making the request.\",\"schema\":{\"type\":\"string\"}},{\"x-key\":3,\"name\":\"Content-Type\",\"in\":\"header\",\"required\":true,\"description\":\"Media type of the request payload\",\"example\":\"\",\"schema\":{\"type\":\"string\",\"default\":\"application/json\"}},{\"x-key\":4,\"name\":\"Accept\",\"in\":\"header\",\"required\":false,\"description\":\"Response media type\",\"schema\":{\"type\":\"string\",\"default\":\"application/json\"}}],\"requestBody\":{\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/eligibiltyRequestModel\"}}},\"description\":\"Use the Claim Status Inquiry (276) transaction to inquire about the status of a claim after it has been sent to a payer, whether submitted on paper or electronically.\",\"required\":true,\"x-examples\":{\"application/json\":{\"payloadType\":\"X12_276_Request_005010X279A1\",\"processingMode\":\"RealTime\",\"payloadId\":\"e51d4fae-7dec-11d0-a866-00a0c91e6da2\",\"timestamp\":\"2018-06-15T15:35:45+03:00\",\"payload\":\"ISA*00*          *00*          *ZZ*AVAILITY       *ZZ*BEACON963116116*210122*2010*^*00501*000003100*0*P*:~GS*HR*AVAILITY*BEACON963116116*20210122*2010*1*X*005010X212~ST*276*0001*005010X212~BHT*0010*13*23749464748*20210122*121008~HL*1**20*1~NM1*PR*2*AVAILITY CLEARINGHOUSE*****PI*BHOVO~HL*2*1*21*1~NM1*41*2*REALMED CORPORATION*****46*S00086~HL*3*2*19*1~NM1*1P*2*MONTEFIORE NYACK HOSPITAL*****XX*1104808062~HL*4*3*22*0~DMG*D8*19690411*M~NM1*IL*1*HARTE*JAMES****MI*K9055514802~TRN*1*123456789~REF*1K*499380E0E36B45A7A230516B740BB0FE00000441~REF*D9*23749464748~AMT*T3*323~DTP*472*RD8*20210118-20210118~SE*17*0001~GE*1*1~IEA*1*000003100~\"}}},\"operationId\":\"benefit-inquiry\",\"responses\":{\"200\":{\"description\":\"The Eligibility and Benefit Response (271) transaction is used to respond to a request inquiry about the health care eligibility and benefits associated with a subscriber or dependent.\",\"headers\":{\"Content-Type\":{\"description\":\"\",\"schema\":{\"type\":\"string\",\"default\":\"application/json\"}}},\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/eligibiltyResponseModel\"},\"examples\":{\"response\":{\"value\":{\"payloadType\":\"X12_276_Request_005010X279A1\",\"processingMode\":\"RealTime\",\"payloadId\":\"e51d4fae-7dec-11d0-a866-00a0c91e6da2\",\"timestamp\":\"2018-06-15T15:35:45+03:00\",\"senderId\":\"PRACINSI\",\"receiverId\":\"BHO-541414194\",\"payload\":\"ISA*00*          *00*          *ZZ*AVAILITY       *ZZ*BEACON963116116*210122*2010*^*00501*000003100*0*P*:~GS*HR*AVAILITY*BEACON963116116*20210122*2010*1*X*005010X212~ST*276*0001*005010X212~BHT*0010*13*23749464748*20210122*121008~HL*1**20*1~NM1*PR*2*AVAILITY CLEARINGHOUSE*****PI*BHOVO~HL*2*1*21*1~NM1*41*2*REALMED CORPORATION*****46*S00086~HL*3*2*19*1~NM1*1P*2*MONTEFIORE NYACK HOSPITAL*****XX*1104808062~HL*4*3*22*0~DMG*D8*19690411*M~NM1*IL*1*HARTE*JAMES****MI*K9055514802~TRN*1*123456789~REF*1K*499380E0E36B45A7A230516B740BB0FE00000441~REF*D9*23749464748~AMT*T3*323~DTP*472*RD8*20210118-20210118~SE*17*0001~GE*1*1~IEA*1*000003100~\"}}}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/eligibiltyResponseModel\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/eligibiltyResponseModel\"}}}},\"400\":{\"description\":\"The request could not be understood by the server due to malformed syntax. The client SHOULD NOT repeat the request without modifications.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"401\":{\"description\":\"The request requires user authentication.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"403\":{\"description\":\"The server understood the request, but is refusing to fulfill it. Authorization will not help and the request SHOULD NOT be repeated.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"404\":{\"description\":\"The server has not found anything matching the Request-URI. No indication is given of whether the condition is temporary or permanent.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"405\":{\"description\":\"The method specified in the Request-Line is not allowed for the resource identified by the Request-URI. The response MUST include an Allow header containing a list of valid methods for the requested resource.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"406\":{\"description\":\"The resource identified by the request is only capable of generating response entities which have content characteristics not acceptable according to the accept headers sent in the request.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"429\":{\"description\":\"Request quota settings limit\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"500\":{\"description\":\"The server encountered an unexpected condition which prevented it from fulfilling the request.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"501\":{\"description\":\"The server does not support the functionality required to fulfill the request. This is the appropriate response when the server does not recognize the request method and is not capable of supporting it for any resource.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"503\":{\"description\":\"The server is currently unable to handle the request due to a temporary overloading or maintenance of the server.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}},\"504\":{\"description\":\"The server, while acting as a gateway or proxy, did not receive a timely response from the upstream server specified by the URI (e.g. HTTP, FTP, LDAP) or some other auxiliary server (e.g. DNS) it needed to access in attempting to complete the request.\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"application/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}},\"text/xml\":{\"schema\":{\"$ref\":\"#/components/schemas/errorSchema\"}}}}},\"tags\":[\"Eligibility\"],\"security\":[{\"oauth2\":[\"read\",\"write\",\"update\",\"delete\"]}]},\"description\":\"Use the Eligibility and Benefit Inquiry (270) transaction to inquire about the health care eligibility and benefits associated with a subscriber or dependent.\"}},\"tags\":[{\"name\":\"Eligibility\",\"description\":\"EDI 270/271 - Eligibility and Benefit Inquiry and Response.\"}],\"x-mock\":true,\"x-metadata\":{\"metadata\":{\"swaggerName\":\"dad42a4048a34eb7b9f1cdc7b992887a\",\"revision\":1,\"documentation\":[],\"category\":[{\"name\":\"Unsorted\",\"paths\":[\"/benefit-inquiry\"]}]}},\"security\":[{\"oauth2\":[\"read\",\"write\",\"update\",\"delete\"]}],\"servers\":[{\"description\":\"Sandbox Server\",\"url\":\"https://sandbox.acme.com/\",\"x-name\":\"Server1\"},{\"description\":\"Development Server\",\"url\":\"https://dev.acme.com/\",\"x-name\":\"Server2\"},{\"description\":\"QAT Server\",\"url\":\"https://qat.acme.com/\",\"x-name\":\"Server3\"},{\"description\":\"Production Server\",\"url\":\"https://api.acme.com/\",\"x-name\":\"Server4\"}],\"components\":{\"securitySchemes\":{\"oauth2\":{\"type\":\"oauth2\",\"description\":\"The Client Credentials grant is used when applications request an access token to access their own resources, not on behalf of a user.\",\"flows\":{\"clientCredentials\":{\"tokenUrl\":\"https://api.acme.com/v1/access/token\",\"scopes\":{\"read\":\"Allow read scope\",\"write\":\"Allow write scope\",\"update\":\"Allow update scope\",\"delete\":\"Allow delete scope\"}}}}},\"schemas\":{\"errorSchema\":{\"description\":\"Container to hold error data model for X12 transactions\",\"type\":\"object\",\"required\":[\"errors\"],\"properties\":{\"errors\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"code\":{\"type\":\"string\",\"example\":\"Security-1001\"},\"userMessage\":{\"type\":\"string\",\"example\":\"Invalid Access Token\"},\"info\":{\"type\":\"string\",\"example\":\"https://developers.myapi.com/errors/#Security-1001\"}}}}}},\"eligibiltyRequestModel\":{\"description\":\"This API is designed to assist those who request reviews (specialty care, treatment, admission) and those who respond to those requests using the 278 format.\",\"properties\":{\"payloadType\":{\"type\":\"string\",\"description\":\"Paylaod type of EDI X12 request\"},\"processingMode\":{\"type\":\"string\",\"description\":\"Processing mode of the EDI 276/277 request\"},\"payloadID\":{\"type\":\"string\",\"description\":\"ID of the EDI X12 request\"},\"timestamp\":{\"type\":\"string\",\"format\":\"date-time\",\"pattern\":\"[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) (2[0-3]|[01][0-9]):[0-5][0-9]\",\"description\":\"Timestamp the request was sent in\"},\"payload\":{\"type\":\"string\",\"description\":\"X12 EDI content or payload used for checking claim status\"}},\"type\":\"object\"},\"eligibiltyResponseModel\":{\"description\":\"This API is designed to assist those who request reviews (specialty care, treatment, admission) and those who respond to those requests using the 278 format.\",\"properties\":{\"payloadType\":{\"type\":\"string\",\"description\":\"Paylaod type of EDI X12 request\"},\"processingMode\":{\"type\":\"string\",\"description\":\"Processing mode of the EDI 276/277 request\"},\"payloadID\":{\"type\":\"string\",\"description\":\"ID of the EDI X12 request\"},\"senderID\":{\"type\":\"string\",\"description\":\"Sender ID of the EDI X12 request\"},\"receiverID\":{\"type\":\"string\",\"description\":\"Receiver ID of the EDI X12 request\"},\"timestamp\":{\"type\":\"string\",\"format\":\"date-time\",\"pattern\":\"[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) (2[0-3]|[01][0-9]):[0-5][0-9]\",\"description\":\"Timestamp the request was sent in\"},\"payload\":{\"type\":\"string\",\"description\":\"X12 EDI content or payload used for checking claim status\"}},\"type\":\"object\"}}}}";

		String pathToReplace = "/v10/new";
		String replaceSwagger3BasePath = SwaggerUtil.replaceSwagger3BasePath(swagger3, pathToReplace);

		SwaggerParseResult parseResult = new OpenAPIParser().readContents(replaceSwagger3BasePath, null, null);
		List<Server> servers = parseResult.getOpenAPI().getServers();
		for (Server s : servers) {
			assertTrue(s.getUrl().contains(pathToReplace));
		}

	}

}
